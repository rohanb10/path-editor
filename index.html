<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
	<div class="container">
		<div id="controls">
			<h1>Polyline Editing Tool</h1>
			<div class="footer">
				<div class="handle">
					<a onclick="openDrawer('about', this)">info</a>
					<a onclick="openDrawer('preferences', this)">prefs</a>
				</div>
				<div class="drawer">
					<div id="preferences">
						<!-- <div>
							<label for="api-key">Google Maps API Key <a class="sup" href="https://developers.google.com/maps/documentation/javascript/get-api-key">get</a></label>
							<input type="text" id="api-key" placeholder="YOUR_API_KEY">
						</div> -->
						<div>
							<label for="map-type">Map Type</label>
							<select id="map-type">
								<option value="roadmap">Roads (default)</option>
								<option value="satellite">Satellite</option>
								<option value="hybrid">Hybrid</option>
								<option value="terrain">Terrain</option>
							</select>
						</div>
						<div>
							<label for="min-zoom">Min Zoom</label>
							<input type="number" id="min-zoom" value="8" min="0" max="17">
						</div>
						<div>
							<label for="max-zoom">Max Zoom</label>
							<input type="number" id="max-zoom" value="18" max="1" min="18">
						</div>
						<div>
							<label for="double-click">Double Click to Zoom</label>
							<input type="checkbox" id="double-click">
						</div>
						<div>
							<a onclick="updatePrefs()">Save</a>
							<a onclick="closeDrawer()">Cancel</a>
						</div>
					</div>
					<div id="about">
						<p>Strava doesnt let me edit my rides so I did it myself.</p>
						<p>Made by <a target="_blank" href="https://rohan.xyz">rohan</a></p>
						<p>Bugs or feature requests can be made on <a target="_blank" href="https://github.com/rohanb10/polyline-point-purger">github</a></p>
						<div><a onclick="closeDrawer()">Close</a></div>
					</div>
				</div>
			</div>
			<div class="steps">
				<ol>
					<div class="step active" data-step="0">
						<div class="instructions">
								<p>A simple tool to edit paths and remove vertices (in bulk).</p>
								<p>Some export options might not work with all browsers. For best results, use Chrome.<p>
							<div class="next"><a onclick="goToStep(1)">Start</a></div>
						</div>
					</div>
					<li class="step" data-step="1">
						<div class="action" onclick="goToStep(1)">Upload</div>
						<div class="instructions">
							<p>Make sure your polyline<a class="sup" href="https://developers.google.com/maps/documentation/utilities/polylinealgorithm">?</a> is properly encoded and escaped<a class="sup" href="https://github.com/mapbox/polyline/issues/23">?</a></p>
							<div class="upload">
								<input type="file" id="polyline-file" onchange="uploaded('file', this)" accept=".txt" autocomplete="off">
								<label for="polyline-file"><span></span><span>Upload a text file</span></label>
								<label for="polyline-file">or paste it directly</label>
								<input type="textarea" rows="8" id="polyline-text" oninput="uploaded('text', this)" onpaste="uploaded('paste', this)" autocomplete="off">
							</div>
						</div>
						<div class="next hidden"><a onclick="goToStep(1.5)">Preview</a></div>
					</li>
					<li class="step" data-step="2">
						<div class="action" onclick="goToStep(2)">Edit</div>
						<div class="instructions">
							<ul>
								<li>Drag vertices along the map to the correct position.</li>
								<li>Drag the translucent vertex between two existing opaque vertices to create a new one</li>
								<li>Left click on a vertex you want to remove.</li>
								<li>Draw a shape to remove vertices in bulk
									<ul>
										<li>Right click to begin drawing the shape</li>
										<li>Right click a second time to confirm the size of the shape</li>
										<li>Left click inside the shape to remove half of the vertices contained in the shape's bounds. Repeat as many times as needed</li>
										<li>Right click a third time to delete the shape</li>
									</ul>
								</li>
							</ul>
							<div class="next"><a onclick="goToStep(3)">Next</a></div>
						</div>
					</li>
					<li class="step" data-step="3">
						<div class="action" onclick="goToStep(3)">Download</div>
						<div class="instructions">
							<p>Download the freshly edited polyline in your preferred format</p>
							<div class="download">
								<div class="prefs">
									<select id="export-type" onchange="updateMediums(this)" autocomplete="off">
										<option value="polyline" selected>Polyline</option>
										<option value="cords">Coordinates</option>
									</select>
									to
									<select id="export-medium" onchange="updateNL(this)" autocomplete="off">
										<option id="option_clipboard" value="clipboard" selected>Clipboard</option>
										<option id="option_csv" value="csv" disabled>CSV</option>
										<option id="option_txt" value="txt">Text file</option>
										<option id="option_arr" value="arr" disabled>Text file (Array)</option>
										<option id="option_obj" value="obj" disabled>Text file (Object)</option>
									</select>
								</div>
								<div id="nl" class="hidden">
									<input type="checkbox" id="new_lines" checked=true disabled=true>
									<label for="new_lines">Each coordinate on new line?</label>
								</div>
								<a class="go" onclick="exportPath()">Go</a>
							</div>
							<div class="message"></div>
							<div class="clipboard-hidden"></div>
							<br>
							<p>Some download options might not work with all browsers. For best results, use Chrome<p>
						</div>
					</li>
				</ol>
			</div>
		</div>
		<div id="map"></div>
	</div>
	<script src="https://maps.googleapis.com/maps/api/js"></script>
	<script src="polylines.js"></script>

	<script src="script.js"></script>
	<script src="controls.js"></script>
</body>
</html>